# 智能记账应用

一个功能完整的智能记账应用，支持多种用户模式和输入方式，提供全面的财务管理功能。

## 🌟 项目特色

### 多用户模式支持
- **学生模式** - 专为学生设计，支持兼职收入管理、学习预算跟踪
- **家庭模式** - 适合家庭使用，支持多成员账户管理、家庭预算规划
- **自由职业者模式** - 为自由职业者提供项目收入跟踪、税务规划

### 智能输入方式
- **语音记账** - 使用Web Speech API实现智能语音识别
- **拍照记账** - 图像识别技术解析小票和账单
- **手动输入** - 传统手动记账方式
- **二维码扫描** - 快速扫描支付二维码

### 数据管理
- **双数据库支持** - 本地存储 + Supabase云端数据库
- **实时同步** - 多设备数据自动同步
- **数据备份** - 自动备份和恢复功能

## 📱 功能特性

### 核心功能
- ✅ 多方式记账（语音、拍照、手动、二维码）
- ✅ 实时收支统计和图表分析
- ✅ 智能分类和预算跟踪
- ✅ 数据导出和备份
- ✅ 多用户模式切换

### 学生模式特色
- 📚 兼职收入管理
- 🎯 学习预算规划
- 📊 收支分析报告
- 💰 奖学金和助学金跟踪

### 家庭模式特色
- 👨‍👩‍👧‍👦 多成员账户管理
- 🏠 家庭预算规划
- 📈 家庭收支分析
- 🎁 礼金和红包管理

## 🚀 快速开始

### 环境要求
- Node.js 14+
- 现代浏览器（支持Web Speech API）
- 可选：MongoDB（用于后端API）

### 前端启动
```bash
# 克隆项目
git clone <repository-url>
cd Accounting_app

# 启动开发服务器
# 使用Python
python -m http.server 8000

# 或使用Node.js
npx http-server -p 8000

# 访问应用
# 打开浏览器访问 http://localhost:8000
```

### 后端启动
```bash
# 进入后端目录
cd server

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，配置数据库连接等

# 启动后端服务
npm run dev

# 后端API将在 http://localhost:3000 运行
```

## 📁 项目结构

```
Accounting_app/
├── src/                    # 前端源码
│   ├── js/                 # JavaScript模块
│   │   ├── app.js          # 应用核心类
│   │   ├── voice-recognition.js  # 语音识别
│   │   ├── qr-scanner.js   # 二维码扫描
│   │   ├── photo-recognition.js   # 照片识别
│   │   ├── input-manager.js       # 输入管理器
│   │   └── init.js         # 应用初始化
│   ├── styles/             # 样式文件
│   └── pages/              # 页面组件
│       ├── home.js         # 首页
│       ├── student-mode.js # 学生模式页面
│       ├── family-mode.js  # 家庭模式页面
│       └── profile.js      # 个人资料页面
├── server/                 # 后端API服务
│   ├── config/            # 配置文件
│   ├── models/            # 数据模型
│   ├── routes/            # API路由
│   └── scripts/           # 数据库脚本
├── index.html             # 主页面
├── test.html             # 功能测试页面
└── README.md             # 项目说明
```

## 🗄️ 数据库配置

### 本地存储模式（默认）
- 无需额外配置
- 数据保存在浏览器localStorage中
- 适合个人使用和快速体验

### Supabase云端数据库（推荐）
- 支持多设备数据同步
- 完整的用户认证系统
- 自动备份和恢复

配置步骤：
1. 参考 `SUPABASE_SETUP.md` 创建Supabase项目
2. 配置数据库连接信息
3. 运行初始化脚本

### MongoDB后端API
- 完整的RESTful API
- JWT用户认证
- 数据统计和分析功能

## 🎯 使用指南

### 选择用户模式
1. 首次使用时选择适合的用户模式
2. 学生模式：适合学生群体，支持兼职收入管理
3. 家庭模式：适合家庭使用，支持多成员管理
4. 模式可随时切换

### 记账方式

#### 语音记账
1. 点击"语音记账"按钮
2. 允许应用使用麦克风
3. 说出记账内容，如："今天买咖啡花了30元"
4. 系统自动识别并保存

#### 拍照记账
1. 点击"拍照记账"按钮
2. 拍摄小票或账单照片
3. 系统识别关键信息
4. 确认并保存交易

#### 手动输入
1. 点击"手动输入"按钮
2. 填写交易详细信息
3. 选择分类和类型
4. 保存记录

### 数据查看
- **首页**：查看本月收支概况
- **分析页面**：查看详细统计图表
- **模式页面**：查看模式特定功能
- **个人资料**：管理账户设置

## 📊 技术架构

### 前端技术栈
- **HTML5/CSS3** - 响应式页面布局
- **JavaScript ES6+** - 现代JavaScript语法
- **Chart.js** - 数据可视化图表
- **Font Awesome** - 图标库
- **Supabase JS** - 云端数据库客户端

### 后端技术栈
- **Node.js** - 服务器运行环境
- **Express.js** - Web应用框架
- **MongoDB** - 文档数据库
- **JWT** - 用户认证
- **bcryptjs** - 密码加密

### 特色功能实现
- **语音识别**：Web Speech API
- **图像识别**：Canvas + 图像处理算法
- **二维码扫描**：jsQR库
- **数据同步**：Supabase实时数据库

## 🔧 开发指南

### 添加新的用户模式
1. 在 `src/pages/` 创建新的模式页面
2. 实现模式特定的业务逻辑
3. 在路由系统中注册新页面
4. 更新导航菜单和样式

### 自定义分类系统
修改 `src/js/app.js` 中的分类配置：

```javascript
this.categories = [
    { id: 'food', name: '餐饮', color: '#ff6b6b', icon: '🍽️' },
    { id: 'transport', name: '交通', color: '#4ecdc4', icon: '🚗' },
    // 添加更多分类...
];
```

### 数据模型
应用使用统一的数据模型：

```javascript
{
    id: '唯一标识',
    type: 'income|expense',    // 收入或支出
    amount: 100,              // 金额
    category: 'food',         // 分类ID
    description: '交易描述',
    merchant: '商户名称',
    date: '2024-01-01',       // 日期
    time: '12:00',            // 时间
    source: 'student_mode'    // 数据来源
}
```

## 📱 移动端兼容性

### 支持平台
✅ **安卓（Android）7.0+**
- Chrome for Android 60+
- 主流品牌原生浏览器

✅ **iOS 11.0+**
- Safari 浏览器
- iOS版Chrome 60+
- Firefox 55+

### 功能支持情况
| 功能 | 安卓 | iOS |
|------|------|-----|
| 语音识别 | ✅ | ✅ |
| 摄像头访问 | ✅ | ✅ |
| 文件上传 | ✅ | ✅ |
| 本地存储 | ✅ | ✅ |
| 推送通知 | ⚠️ | ⚠️ |

## 🐛 故障排除

### 常见问题

1. **语音识别不工作**
   - 检查麦克风权限设置
   - 确保使用HTTPS或localhost访问
   - 检查浏览器兼容性

2. **摄像头无法访问**
   - 允许网站使用摄像头
   - 检查设备权限设置
   - 重启浏览器重试

3. **数据同步失败**
   - 检查网络连接
   - 验证Supabase配置
   - 查看控制台错误信息

4. **本月结余计算错误**
   - 检查交易记录日期格式
   - 验证收入和支出分类
   - 查看调试日志输出

### 调试工具
- 使用 `test.html` 进行功能测试
- 查看浏览器控制台日志
- 使用网络面板检查API请求

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

### 开发流程
1. Fork 项目仓库
2. 创建功能分支
3. 提交代码变更
4. 创建Pull Request

### 代码规范
- 使用ES6+语法
- 遵循JavaScript标准风格
- 添加必要的注释
- 确保移动端兼容性

## 📄 许可证

MIT License

## 📞 技术支持

- 项目文档：查看项目中的 `.md` 文件
- 问题反馈：提交GitHub Issue
- 功能建议：通过Issue提出

---

**智能记账应用** - 让财务管理更简单、更智能！